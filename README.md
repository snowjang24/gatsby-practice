# Gatsbyì™€ Reactë¡œ ë§Œë“œëŠ” ë¸”ë¡œê·¸
> ê°•ì˜ : https://www.youtube.com/watch?v=8t0vNu2fCCM
>
> ë³¸ ê¸€ì€ ìƒë‹¨ì˜ "Andrew Mead"ì˜ ê°•ì˜ë¥¼ ë“£ê³ , ì •ë¦¬ë¥¼ ìœ„í•´ ë‚´ìš©ì„ ì¶”ê°€í•˜ì—¬ ì‘ì„±í•œ ê¸€ì…ë‹ˆë‹¤.

<br>

<details>
  <summary>
    <strong>ëª©ì°¨</strong>
  </summary>
  <p>
    1. Creating a Gatsby Site<br>
    2. Working with Gatsby Pages<br>
    3. Linking Between Pages with Gatsby<br>
    4. Creating Shared Page Components<br>
    5. Creating Gatsby Page Layouts<br>
    6. Styling Gatsby Projects<br>
    7. Styling Gatsby with CSS Modules<br>
    8. Gatsby Data with GraphQL<br>
    9. GraphQL Playground<br>
    10. Sourcing Content from the File System<br>
    11. Working with Markdown Posts<br>
    12. Generating Slugs for Posts<br>
    13. Dynamically Generating Pages<br>
    14. Rendering Post Data in Blog Template<br>
    15. Adding Images to Posts<br>
    16. Getting Started with Contentful<br>
    17. Rendering Contentful Posts<br>
    18. Dynamic Pages from Contentful<br>
    19. 404 Pages and React Helme<br>
    20. Deploying Your Gatsby Site<br>
  </p>
</details>

## ğŸ“Œ Gatsbyì™€ ë¸”ë¡œê·¸

### ë‚˜ì˜ ë¸”ë¡œê·¸ ì—°ëŒ€ê¸°

ì²˜ìŒ ë¸”ë¡œê·¸ëŠ” [jekyll](https://jekyllrb-ko.github.io/)ì„ ì‚¬ìš©í•˜ì—¬ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ì—ˆë‹¤. ê·¸ëŸ¬ë‹¤ ì–¼ë§ˆ ì§€ë‚˜ì§€ ì•Šì•„ [HEXO](https://hexo.io/ko/index.html)ì™€ [VEXO](https://github.com/yanm1ng/hexo-theme-vexo)í…Œë§ˆë¡œ ë„˜ì–´ê°€ê²Œ ë˜ì—ˆëŠ”ë°, í•œì°½ Nodeì™€ Vueë¥¼ ê³µë¶€í•  ë•Œì˜€ë‹¤. 

ì´ë²ˆì— [Gatsby](https://www.gatsbyjs.org/)ë¡œ ë„˜ì–´ì˜¤ê²Œ ëœ ì´ìœ ë„ ì´ì „ê³¼ ê°™ë‹¤. Reactë¥¼ ê³µë¶€í•˜ë‹¤ ë³´ë‹ˆ Reactë¥¼ ì‚¬ìš©í•˜ì—¬ ë‚˜ë§Œì˜ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ì–´ë³´ê³  ì‹¶ì–´ì¡Œë‹¤. ì´ì „ì— í…Œë§ˆë¥¼ ì¡°ê¸ˆ ìˆ˜ì •í•˜ì—¬ ë¸”ë¡œê·¸ë¥¼ ë§Œì´ë²ˆì—ëŠ” í…Œë§ˆë¥¼ ìµœì†Œí™”í•˜ì—¬ ì§„ì§œ **"ë‚˜ë§Œì˜ ë¸”ë¡œê·¸"**ë¥¼ ë§Œë“¤ì–´ ë³´ë ¤ í•œë‹¤.

<br>

### Gatsbyì— ëŒ€í•˜ì—¬

 [**Gatsby**](https://www.gatsbyjs.org/)ëŠ” **React**ì™€ **GraphQL**ì„ ì´ìš©í•˜ì—¬ ì›¹ ì‚¬ì´íŠ¸ì™€ ì›¹ ì•±ì„ ë§Œë“¤ê¸° ì‰½ê²Œ ì œì‘í•  ìˆ˜ ìˆëŠ” **í”„ë ˆì„ì›Œí¬**ë‹¤. GatsbyëŠ” ìš°ë¦¬ê°€ ì•„ëŠ” ì •ì ì¸ ì›¹ì„ ë§Œë“¤ìˆ˜ ìˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ ë™ì ì¸ ì›¹ ì•±ì„ ë§Œë“œëŠ”ë° ëª¨ë‘ ì“°ì¸ë‹¤.

Gatsbyë¥¼ ì´ìš©í•˜ì—¬ ì›¹ì„ ìƒì„±í•  ë•ŒëŠ” Reactì™€ GraphQLì´ ì£¼ë¥¼ ì´ë£¨ê¸° ë•Œë¬¸ì—, ì´ ë‘˜ì— ëŒ€í•œ ì§€ì‹ì´ ì–´ëŠ ì •ë„ ìˆì–´ì•¼ ì›í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ ì›¹ì„ ì œì‘í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ í˜„ì¬ ë¸”ë¡œê·¸ ë§Œë“¤ê¸°ì—ì„œëŠ” ì•„ì§ GraphQLì— ëŒ€í•´ ê¹Šê²Œ ë‹¤ë£¨ì§€ ì•Šê¸° ë•Œë¬¸ì— ì–´ëŠ ì •ë„ì˜ Reactì§€ì‹ë§Œ ìˆì–´ë„ ì¶©ë¶„íˆ ì›í•˜ëŠ” ëŒ€ë¡œ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

<img src="README/34442516-fb1a1a3c-ecc2-11e7-8fe8-530435f22336.jpg" width="60%">

<br>

## <a name="number1">âœï¸ 1. Gatsbyë¡œ ë¸”ë¡œê·¸ ë§Œë“¤ê¸°</a>

Gatsbyë¥¼ ì„¤ì¹˜í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. **gatsby-cli**ë¥¼ ì„¤ì¹˜í•˜ê³ , gatsby ëª…ë ¹ì–´ë¥¼ í†µí•´ ì›í•˜ëŠ” ë¸”ë¡œê·¸(í˜¹ì€ í”„ë¡œì íŠ¸) ì´ë¦„ìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•œë‹¤. ì´ ë•Œ [gastby-starter](https://github.com/gatsbyjs/gatsby-starter-hello-world)ë¥¼ ì´ìš©í•˜ë©´ ì¢€ ë” ì‰½ê²Œ ê¸°ë³¸ì ì¸ ì„¸íŒ…ì„ í•œë‹¤.

```bash
npm install -g gatsby-cli
gatsby new gatsby-practice https://github.com/gatsbyjs/gatsby-starter-hello-world
```

ì—¬ëŸ¬ íŒŒì¼ë“¤ê³¼ í´ë”ê°€ ìƒê²¼ë‹¤. ì—¬ê¸°ì„œ `package.json`ì„ ì—´ì–´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì–´ë“¤ì´ ì¡´ì¬í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```json
"scripts": {
  "build": "gatsby build",
  "develop": "gatsby develop",
  "format": "prettier --write src/**/*.{js,jsx}",
  "start": "npm run develop",
  "serve": "gatsby serve",
  "test": "echo \"Write tests! -> https://gatsby.dev/unit-testing\""
}
```

ì•„ë˜ì™€ ê°™ì€ ëª…ë ¹ì–´ë¡œ ì„œë²„ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

```bash
npm run develop
```

 ì‚¬ì‹¤ `npm run develop`ê³¼ `gatsby develop`ì€ ë™ì¼í•œ 

```bash
npm run develop

> gatsby-starter-hello-world@0.1.0 develop /Users/soonho/project/jsnow-blog
> gatsby develop

success open and validate gatsby-configs - 0.005 s
success load plugins - 0.035 s
```



localhostë¥¼ ì‹¤í–‰í•´ë³´ë©´ Hello worldë¼ëŠ” ë¬¸êµ¬ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```bash
You can now view gatsby-starter-hello-world in the browser.
â €
  http://localhost:8000/
â €
View GraphiQL, an in-browser IDE, to explore your site's data and schema
â €
  http://localhost:8000/___graphql
â €
Note that the development build is not optimized.
To create a production build, use npm run build
```

`src/pages`ì—ëŠ” ì•ìœ¼ë¡œ ë§Œë“¤ í˜ì´ì§€ë“¤ì„ ë‹´ìœ¼ë©´ ëœë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ `index.js`ê°€ ìƒì„±ë˜ì–´ ìˆë‹¤. ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•˜ê³  ì €ì¥í•˜ë©´ í™”ë©´ì— ì›í•˜ëŠ” ë¬¸êµ¬ê°€ ì¶œë ¥ëœë‹¤.

```javascript
import React from "react"

const IndexPage = () => {
  return (
    <div>
      <h1>Hello.</h1>
      <h2>I'm JSnow! Front-end developer, I'm learning React!</h2>
    </div>
  )
}

export default IndexPage
```

ì—¬ê¸°ì„œ `index.js`ëŠ” ìš°ë¦¬ê°€ í”íˆ ë³´ëŠ” `index.html`ê³¼ ë™ì¼í•œ ì—­í• ì„ í•œë‹¤.

`src/pages`ì— `blog.js`ë¥¼ ìƒì„±í•œë‹¤. ì €ì¥í›„ `localhost:8000/blog`ìœ¼ë¡œ ì ‘ì†í•˜ë©´ ìš°ë¦¬ê°€ ì¶œë ¥í•˜ê³ ì í–ˆë˜ ë¬¸êµ¬ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.

```javascript
import React from "react"

const BlogPage = () => {
  return (
    <div>
      <h1>Blog</h1>
      <p>Posts will show up here later on</p>
    </div>
  )
}

export default BlogPage
```

ì´ì œ ë¸”ë¡œê·¸ í˜ì´ì§€ ì™¸ì—ë„ `contact.js`ì™€ `about.js`í˜ì´ì§€ë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤.

```javascript
// about.js
import React from "react"

const AboutPage = () => {
  return (
    <div>
      <h1>About me</h1>
      <p>I'm just student who love front-end and design</p>
    </div>
  )
}

export default AboutPage

// contact.js
import React from "react"

const ContactPage = () => {
  return (
    <div>
      <h1>Contact</h1>
      <p>Contact me !</p>
    </div>
  )
}

export default ContactPage
```

gatsbyì—ì„œ ë§í¬ëŠ” ì¼ë°˜ì ì¸ ìš°ë¦¬ê°€ì•„ëŠ” ì•µì»¤(`<a>`)ë¥¼ ì´ìš©í•˜ëŠ” ê²ƒ ë³´ë‹¤ `gatsby`ëª¨ë“ˆì— ìˆëŠ” `Link` ì»´í¬ë„ŒíŠ¸ ì´ìš©í•œë‹¤. ì´ë¥¼ ì´ìš©í•˜ë©´ ìµœì í™”ê°€ ìë™ìœ¼ë¡œ ì´ë£¨ì–´ì§„ë‹¤. í™”ë©´ ì „í™˜ì‹œ ë°˜ì§ê±°ë¦¬ëŠ” ë¡œë“œê°€ ì—†ì–´ì§„ë‹¤. 
ì•„ë˜ì˜ ë‘ íƒœê·¸ë¥¼ ì§ì ‘ ëˆŒëŸ¬ë³´ë©´ `Link`ì»´í¬ë„ŒíŠ¸ê°€ ë” ë¹ ë¥¸ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.

```javascript
import React from "react"
import { Link } from "gatsby"

const AboutPage = () => {
  return (
    <div>
      <h1>About me</h1>
      <p>I'm just student who love front-end and design</p>
      <p>
        Need a developer? <a href="/contact">Contact me.</a>
      </p>
      <p>
        Need a developer? <Link to="/contact">Contact me.</Link>
      </p>
    </div>
  )
}

export default AboutPage
```

ì´ì œëŠ” ëª¨ë“  í˜ì´ì§€ì—ì„œ ê³µí†µìœ¼ë¡œ ë³´ì´ëŠ” headerê³¼ footerë¥¼ ë§Œë“¤ì–´ ë³´ë ¤ê³  í•œë‹¤.

`src/components`í´ë”ë¥¼ ë§Œë“¤ì–´ì£¼ê³  ê±°ê¸°ì— `footer.js`ë¥¼ ìƒì„±í•œë‹¤.

```javascript
import React from "react"

const Footer = () => {
  return (
    <footer>
      <p>Created by JSnow, Â© 2019</p>
    </footer>
  )
}

export default Footer
```

ì•„ê¹Œ ì´ë¯¸ ì™„ì„±í•œ Contactí˜ì´ì§€ì— ë§Œë“¤ì–´ì§„ Footerë¥¼ í•œ ë²ˆ import í•´ë³¸ë‹¤.

```javascript
import React from "react"
import Footer from "../components/footer"

const ContactPage = () => {
  return (
    <div>
      <h1>Contact</h1>
      <p>
        Contact me with <a href="mailto:asdka4618@gmail.com"></a>!
      </p>
      <Footer />
    </div>
  )
}

export default ContactPage
```

ì´ë²ˆì—ëŠ” Headerë¥¼ ë§Œë“¤ì–´ì£¼ëŠ”ë° ì—­ì‹œë‚˜ `Link`ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤.

```javascript
import React from "react"
import { Link } from "gatsby"

const Header = () => {
  return (
    <header>
      <h1>JSnow</h1>
      <nav>
        <ul>
          <li>
            <Link to="/">Home</Link>
          </li>
          <li>
            <Link to="/blog">Blog</Link>
          </li>
          <li>
            <Link to="/about">About</Link>
          </li>
          <li>
            <Link to="/contact">Contact</Link>
          </li>
        </ul>
      </nav>
    </header>
  )
}

export default Header
```

`IndexPage`ì— `Header`ì™€ `Footer`ë¥¼ ë„£ì–´ì¤€ë‹¤.

```javascript
import React from "react"

import Header from "../components/header"
import Footer from "../components/footer"

const IndexPage = () => {
  return (
    <div>
      <Header />
      <h1>Hello.</h1>
      <h2>I'm JSnow! Front-end developer, I'm learning React!</h2>
      <Footer />
    </div>
  )
}

export default IndexPage
```

ì´ë ‡ê²Œ `Header`ê³¼ `Footer`ë¥¼ ì ìš©í•˜ê³ ë³´ë‹ˆ ëª¨ë“  í˜ì´ì§€ì—ì„œë„ `Header`ì™€ `Footer`ë¥¼ ë³´ì´ê²Œ í•˜ê³  ì‹¶ë‹¤. 
ì´ë¥¼ ìœ„í•´ì„œ `src/components`ì— `layout.js`ë¥¼ ë§Œë“ ë‹¤.
`IndexPage`ì— ìˆë˜ `Header`ì™€ `Footer`ë¥¼ ì˜®ê¸¸ ê²ƒì´ê¸° ë•Œë¬¸ì— ì§€ì›Œì£¼ê³  `Layout`ë§Œ `import`í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ì§€ì›Œì¤€ë‹¤. ê·¸ë¦¬ê³  `Layout`ìœ¼ë¡œ ì›ë˜ ìˆë˜ ë¬¸êµ¬ë¥¼ ì¸ìë¡œ ì „ë‹¬í•œë‹¤.

```javascript
import React from "react"

import Layout from "../components/layout"

const IndexPage = () => {
  return (
    <div>
      <Layout>
        <h1>Hello.</h1>
        <h2>I'm JSnow! Front-end developer, I'm learning React!</h2>
      </Layout>
    </div>
  )
}

export default IndexPage
```

ì´ì œ `Layout`ì„ ë§Œë“ ë‹¤. ì•„ê¹Œ ë„˜ê²¨ë°›ì€ ì¸ìë¥¼ `props.children`ìœ¼ë¡œ ë¿Œë ¤ì¤€ë‹¤. ì•„ê¹Œ ë‹¤ë¥¸ í˜ì´ì§€ì— ë„£ì€ ì¤‘ë³µëœ ì½”ë“œë“¤ì„ ì œê±°í•´ì£¼ê³  ëª¨ë“  í˜ì´ì§€ì— `Layout` ì„ ì¶”ê°€í•˜ê³  ë‚´ìš©ë“¤ì„ ëª¨ë‘ ì¸ìë¡œ ë„˜ê²¨ì¤€ë‹¤.

```javascript
import React from "react"

import Header from "../components/header"
import Footer from "../components/footer"

const Layout = props => {
  return (
    <div>
      <Header />
      {props.children}
      <Footer />
    </div>
  )
}

export default Layout
```

ì´ì œ ì–´ëŠì •ë„ ë¸”ë¡œê·¸ì˜ í‹€ì€ ì¡ì•˜ë‹¤. í•˜ì§€ë§Œ ì•„ì§ ë””ìì¸ìœ¼ë¡œ ì•„ë¬´ê²ƒë„ ì—†ê¸° ë•Œë¬¸ì— ì˜ˆì˜ì§€ ì•Šë‹¤. ê¾¸ë©°ì£¼ê¸° ìœ„í•´ `src/styles`ë¥¼ ë§Œë“¤ê³  `index.css`íŒŒì¼ë„ ë§Œë“ ë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ëª¨ë“  ê¸€ìë¥¼ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ë§Œë“¤ì–´ë³¸ë‹¤.

```css
*{
  color: red;
}
```

`Layout`ì— í•œ ì¤„ë§Œ ì¶”ê°€í•˜ë©´ ì‰½ê²Œ styleì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.

```javascript
import "../styles/index.css"
```

í•˜ì§€ë§Œ ê·¸ëƒ¥ CSSë¥¼ ì“°ëŠ” ê²ƒë³´ë‹¤ ì¢€ ë” í¸í•˜ê³  ìœ ìš©í•œ SASSë¥¼ ì“°ëŠ” ê²ƒì´ ë” ì¢‹ì„ ê²ƒ ê°™ê¸° ë•Œë¬¸ì— gatsbyì˜ pluginì„ í•œ ë²ˆ ì¨ë³´ë ¤ê³  í•œë‹¤. gatsbyëŠ” gatsbyë§Œì˜ ìœ ìš©í•œ pluginë“¤ì„ ì œê³µí•˜ê³  ìˆë‹¤.
í”ŒëŸ¬ê·¸ì¸ì€ Gatsbyì—ì„œ [plugins](https://www.gatsbyjs.org/plugins/) ê²€ìƒ‰í•´ì„œ ì„¤ì¹˜ ë°©ë²•ì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. sassë¥¼ ê²€ìƒ‰í•˜ê³  ì„¤ëª…ì— ë”°ë¼ í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•œë‹¤.

![image-20190618202347406](README/image-20190618202347406-0857027.png)

í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•˜ê³ , ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— `gatsby-config.js`ì— ë¬¸ì„œë¥¼ ë”°ë¼ ì„¸íŒ…í•´ì¤€ë‹¤.
```bash
npm install --save node-sass gatsby-plugin-sass
```

```javascript
module.exports = {
  // in gatsby-config.js
  plugins: [`gatsby-plugin-sass`],
}
```

ê·¸ë¦¬ê³  `index.css`ì˜ í™•ì¥ìë¥¼ `scss`ë¡œ ë°”ê¿”ì£¼ê³  `Layout`ì— ìˆë˜ `import`ì—­ì‹œ ë°”ê¿”ì¤€ë‹¤.

```javascript
import "../styles/index.scss"
```

ê¸°ë³¸ì ì¸ ìŠ¤íƒ€ì¼ì„ ì ìš©í•˜ê¸° ìœ„í•´ gatsbyì—ì„œ ì œê³µí•˜ëŠ” [ê¸°ë³¸ ë¸”ë¡œê·¸ ìŠ¤íƒ€ì¼](http://links.mead.io/gatsbystyles)ì„ ê°€ì ¸ì˜¨ë‹¤. `index.scss`ì— ë¶™ì—¬ë„£ê¸° í•˜ì—¬ ìŠ¤íƒ€ì¼ì„ ì ìš©í•œë‹¤.

![image-20190618204242221](README/image-20190618204242221-0858162.png)

ì¼ë°˜ì ì¸ ë°©ë²•ìœ¼ë¡œ `class`ì´ë¦„ì„ ì£¼ê³  ìŠ¤íƒ€ì¼ì„ ì ìš©í•  ê²½ìš° ì´ë¦„ì´ ê°™ì•„ ê¼¬ì´ëŠ” ê²½ìš°ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— CSS Moduleì„ ì‚¬ìš©í•˜ì—¬ ì ìš©í•œë‹¤.
ë°©ë²•ì€ ê°„ë‹¨í•˜ë‹¤. `header.scss`ì˜€ìœ¼ë©´ ì´ë¦„ì— moduleì„ ë¶™ì—¬ì£¼ë©´ ëœë‹¤. `header.module.scss`

ë§í¬ì˜ ìƒ‰ì„ ë°”ê¿”ì£¼ëŠ” ì˜ˆì‹œë¡œ í•œ ë²ˆ ë³€í•˜ëŠ”ì§€ ë³´ë ¤ í•œë‹¤. ë§Œë“¤ì–´ì§„ `header.module.scss`ì— ë‹¤ìŒê³¼ ê°™ì´ ìŠ¤íƒ€ì¼ì„ ì‘ì„±í•˜ê³  ì €ì¥í•œë‹¤.

```css
.link {
  color: #999;
}
```

`Header`ë¶€ë¶„ì— ì²« ë²ˆì§¸ ë§í¬ì— ìŠ¤íƒ€ì¼ ì ìš©ì„ ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•œë‹¤.

```javascript
import React from "react"
import { Link } from "gatsby"

import headerStyles from "./header.module.scss"

const Header = () => {
  return (
    <header>
      <h1>JSnow</h1>
      <nav>
        <ul>
          <li>
            <Link className={headerStyles.link} to="/">
              Home
            </Link>
          </li>
...
```

CSS Moduleì´ ì ìš©ëœ `Link`ì˜ í´ë˜ìŠ¤ ì´ë¦„ì„ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‹ë³„ìê°€ ë”°ë¡œ ë¶™ì–´ ìˆë‹¤. ì´ë ‡ê²Œ ìƒì„±ëœ ìœ ë‹ˆí¬í•œ í´ë˜ìŠ¤ ì´ë¦„ì„ í†µí•´ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” í´ë˜ìŠ¤ ì´ë¦„ê³¼ ì¤‘ë³µë˜ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.

![image-20190619155239165](README/image-20190619155239165-0927159.png)

ì´ì œ ë ˆì´ì•„ì›ƒì— ëŒ€í•œ ìŠ¤íƒ€ì¼ì„ ë§Œë“¤ì–´ ì£¼ê¸° ìœ„í•´ ë™ì¼í•œ í´ë”ì— `layout.module.scss`ë¥¼ ë§Œë“¤ì–´ì£¼ê³  ë™ì¼í•˜ê²Œ importí•œë‹¤.

```scss
.container {
  margin: 0 auto;
  max-width: 750px;
  padding: 1rem;
}
```

```javascript
import React from "react"

import Header from "../components/header"
import Footer from "../components/footer"
import "../styles/index.scss"
import layoutStyles from "./layout.module.scss"

const Layout = props => {
  return (
    <div className={layoutStyles.container}>
      <Header />
      {props.children}
      <Footer />
    </div>
  )
}

export default Layout

```

Sticky Footerë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ `<div>`í•˜ë‚˜ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì•ˆì— Footerë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ë¥¼ ë„£ì–´ì¤€ë‹¤.

```javascript
import React from "react"

import Header from "../components/header"
import Footer from "../components/footer"
import "../styles/index.scss"
import layoutStyles from "./layout.module.scss"

const Layout = props => {
  return (
    <div className={layoutStyles.container}>
      <div>
        <Header />
        {props.children}
      </div>
      <Footer />
    </div>
  )
}

export default Layout
```

`.content`ì™€ `.container`ì— ê´€í•œ ìŠ¤íƒ€ì¼ì„ ì¶”ê°€í•œ ë’¤ `.content`ë¥¼ JSXì— ì¶”ê°€í•œë‹¤.

```css
.container {
  margin: 0 auto;
  max-width: 750px;
  padding: 1rem;

  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

.content {
  flex-grow: 1;
}
```

```javascript
const Layout = props => {
  return (
    <div className={layoutStyles.container}>
      <div className={layoutStyles.content}>
        <Header />
        {props.children}
      </div>
      <Footer />
    </div>
  )
}
```

ëª‡ê°€ì§€ ë ˆì´ì•„ì›ƒ ë° í—¤ë”ì— ê´€í•œ ìŠ¤íƒ€ì¼ì„ ì ìš©í•œë‹¤.
```css
.header {
  padding: 1rem 0 3rem;
}

.title {
  color: #000000;
  font-size: 3rem;
  text-decoration: none;
}

.nav-list {
  display: flex;
  list-style-type: none;
  margin: 0;
}

.nav-item {
  color: #999;
  font-size: 0.9rem;
  margin-right: 1.3rem;
  text-decoration: none;
}

.nav-item:hover {
  color: #666666;
}

.active-nav-item {
  color: #333333;
}
```

```javascript
import React from "react"
import { Link } from "gatsby"

import headerStyles from "./header.module.scss"

const Header = () => {
  return (
    <header className={headerStyles.header}>
      <h1>
        <Link className={headerStyles.title} to="/">
          JSnow Blog
        </Link>
      </h1>
      <nav>
        <ul className={headerStyles.navList}>
          <li>
            <Link
              className={headerStyles.navItem}
              activeClassName={headerStyles.activeNavItem}
              to="/"
            >
              Home
            </Link>
          </li>
          <li>
            <Link
              className={headerStyles.navItem}
              activeClassName={headerStyles.activeNavItem}
              to="/blog"
            >
              Blog
            </Link>
          </li>
          <li>
            <Link
              className={headerStyles.navItem}
              activeClassName={headerStyles.activeNavItem}
              to="/about"
            >
              About
            </Link>
          </li>
          <li>
            <Link
              className={headerStyles.navItem}
              activeClassName={headerStyles.activeNavItem}
              to="/contact"
            >
              Contact
            </Link>
          </li>
        </ul>
      </nav>
    </header>
  )
}

export default Header
```

ì´ì œ ë“œë””ì–´ ë°ì´í„°ë¥¼ ë‹¤ë¤„ë³´ë ¤ê³  í•œë‹¤. GatsbyëŠ” Graphqlì„ ì´ìš©í•œë‹¤. gatsbyì—ì„œëŠ” graphqlì˜ ê¹Šì€ ë¶€ë¶„ê¹Œì§€ ë‹¤ë£¨ì§€ ì•Šê¸° ë•Œë¬¸ì— ê±±ì •í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

GatsbyëŠ” ì•„ë˜ì˜ ê·¸ë¦¼ê³¼ ê°™ì€ ì›ë¦¬ë¡œ ì‘ë™í•œë‹¤.

![image-20190619193858882](README/image-20190619193858882-0940739.png)

ì•ìœ¼ë¡œ ìš°ë¦¬ëŠ” `gatby-config`íŒŒì¼ì„ ìˆ˜ì •í•˜ì—¬ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê²Œ ë§Œë“œë ¤ê³  í•œë‹¤.

ë¨¼ì € graphqlë¡œ ì–´ë–»ê²Œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ í˜ì´ì§€ ì œëª©ê³¼ ì‘ì„±ìë¥¼ ë°ì´í„°ì— ë„£ëŠ”ë‹¤.
```javascript
module.exports = {
  siteMetadata: {
    title: "JSnow's dev blog",
    author: "Snow Jang",
  },
  // in gatsby-config.js
  plugins: [`gatsby-plugin-sass`],
}
```

graphqlì—ì„œ ë°ì´í„°ë¥¼ í™•ì¸í•˜ë ¤ë©´ [GraphiQL](http://localhost:8000/__graphql)ì„ ì´ìš©í•œë‹¤.

ì—¬ê¸°ì„œ ì™¼ìª½ì„ ë³´ë©´ ì¿¼ë¦¬ë¥¼ ë„£ì„ ìˆ˜ ìˆëŠ”ë° ì™¼í¸ì— ì¿¼ë¦¬ë¥¼ ë„£ê³  ì¬ìƒ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì™¼ìª½ì— ê²°ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.

![image-20190619204630313](README/image-20190619204630313-0944790.png)

ì˜¤ë¥¸ìª½ íŒ¨ë„ ëì˜ Docsë¥¼ ëˆ„ë¥´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë³¼ ìˆ˜ ìˆëŠ”ë° 

![image-20190619205548500](README/image-20190619205548500-0945348.png)

Graphqlì—ëŠ” **query**, **mutation**, **subscribtion** 3ê°€ì§€ ì£¼ìš”í•œ operationì´ ìˆë‹¤. ìš°ë¦¬ëŠ” ê·¸ ì¤‘ì— queryë¥¼ ì£¼ë¡œ ì´ìš©í•  ì˜ˆì •ì´ë‹¤. 

`Query` > `Site` > `siteMetadata` ì˜ ê²½ë¡œë¡œ íƒ€ê³  ë“¤ì–´ê°€ë©´ ìš°ë¦¬ê°€ ë„£ì€ `title`ê³¼ `author` ë°ì´í„°ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

![image-20190619210603502](README/image-20190619210603502-0945963.png)

ì ‘ê·¼ ê²½ë¡œë¥¼ ì•Œì•˜ìœ¼ë‹ˆ ì‹¤ì œë¡œ ì ‘ê·¼í•´ì„œ ë™ì¼í•œ ê²°ê³¼ê°€ ë‚˜ì˜¤ëŠ”ì§€ í™•ì¸í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

```javascript
query {
  site {
    siteMetadata {
      title
    }
  }
}
```

![image-20190619212401106](README/image-20190619212401106-0947041.png)

ì´ì œ ì´ë¥¼ í™œìš©í•˜ì—¬ ì›¹ í˜ì´ì§€ì˜ Titleì„ ë°˜ì˜í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ë©´ ëœë‹¤.

```javascript
import React from "react"
import { Link, graphql, useStaticQuery } from "gatsby"

import headerStyles from "./header.module.scss"

const Header = () => {
  const data = useStaticQuery(graphql`
    query {
      site {
        siteMetadata {
          title
        }
      }
    }
  `)

  return (
    <header className={headerStyles.header}>
      <h1>
        <Link className={headerStyles.title} to="/">
          {data.site.siteMetadata.title}
        </Link>
      </h1>
```
graphqlì„ ì œëŒ€ë¡œ ì´ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” `graphql`ê³¼ `useStaticQuery` ëª¨ë“ˆì„ import í•´ì„œ ì“´ë‹¤.
ê·¸ë¦¬ê³  `data` ë³€ìˆ˜ì— useStaticQuery()ë©”ì„œë“œì™€ graphqlë©”ì„œë“œë¥¼ ì´ìš©í•˜ëŠ”ë° ì´ìš© ë°©ì‹ì´ ì¢€ íŠ¹ì´í•˜ë‹¤ ì•ì—ì„œ ì¼ë˜ ì¿¼ë¦¬ë¥¼ template stringì˜ í˜•ì‹ì¸ Backtick ì‚¬ì´ì— ë„£ì–´ì„œ ì´ìš©í•œë‹¤. ê²°ê³¼ê°€ ì˜¬ë°”ë¥´ê²Œ ë°˜ì˜ ë˜ì—ˆë‹¤.

![image-20190619212934835](README/image-20190619212934835-0947374.png)

ë™ì¼í•œ ë°©ë²•ìœ¼ë¡œ í•œ ë²ˆ `Footer`ì— authorì´ë¦„ì„ ì ìš©í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

```javascript
import React from "react"
import { graphql, useStaticQuery } from "gatsby"

const Footer = () => {
  const data = useStaticQuery(graphql`
    query {
      site {
        siteMetadata {
          author
        }
      }
    }
  `)
  return (
    <footer>
      <p>Created by {data.site.siteMetadata.author}, Â© 2019</p>
    </footer>
  )
}

export default Footer
```

ì°¸ê³ ë¡œ ë‘ ê°œë¥¼ ê°€ì ¸ì˜¤ê³  ì‹¶ìœ¼ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ë©´ ë‘˜ ë‹¤ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.

![image-20190619214624243](README/image-20190619214624243-0948384.png)

ì´ë ‡ê²Œ graphiqlë„ ìœ ìš©í•˜ì§€ë§Œ ì¢€ ë” ìœ ìš©í•œ ë„êµ¬ë¥¼ ì‚¬ìš©í•´ë³´ë ¤ í•œë‹¤. [graphql playground](https://github.com/prisma/graphql-playground)ëŠ” GraphiQLì˜ êµ¬ì„± ìš”ì†Œë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ, ë” ë‚˜ì€ (ë¡œì»¬) ê°œë°œ ì›Œí¬ í”Œë¡œìš°ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤. GraphQLì„ ìœ„í•œ IDEë‹¤. ë” ë§ì€ ê¸°ëŠ¥ì„ ë‹´ê³  ìˆë‹¤.

ë¨¼ì € ì´ë¥¼ ìœ„í•´ì„œ ë£¨íŠ¸ í´ë”ì— `.env.development`ë¼ëŠ” í™˜ê²½ íŒŒì¼ì„ ë§Œë“ ë‹¤. ê·¸ë¦¬ê³  ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ë©´ ëœë‹¤.

```
GATSBY_GRAPHQL_IDE=playground
```

ê·¸ë¦¬ê³  ê°€ë™ì¤‘ì´ë˜ ì„œë²„ë¥¼ ë„ê³  í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í•˜ë‚˜ ë°›ì•„ì¤€ë‹¤.

```bash
npm install --save-dev env-cmd
```

ê·¸ë¦¬ê³  ì´ë¥¼ ì´ìš©í•˜ê¸° ìœ„í•´ `package.json`ì— `develop` ë¶€ë¶„ì„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•œë‹¤.

```json
{
  "name": "gatsby-starter-hello-world",
  "private": true,
  "description": "A simplified bare-bones starter for Gatsby",
  "version": "0.1.0",
  "license": "MIT",
  "scripts": {
    "build": "gatsby build",
    "develop": "env-cmd .env.development gatsby develop",
    "format": "prettier --write src/**/*.{js,jsx}",
    "start": "npm run develop",
    "serve": "gatsby serve",
    "test": "echo \"Write tests! -> https://gatsby.dev/unit-testing\""
  },
  "dependencies": {
```

ì´ì œ ì„¸íŒ…ì„ ë‹¤ ëë‚´ê³  `npm run develop`ìœ¼ë¡œ ì„œë²„ë¥¼ í‚¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ë¥¼ ë§Œë‚˜ê²Œ ëœë‹¤.
```bash
> npm run develop

> gatsby-starter-hello-world@0.1.0 develop /Users/soonho/project/gatsby-practice
> env-cmd .env.development gatsby develop

Error: Unable to locate env file at default location (./.env)
    at /Users/soonho/project/gatsby-practice/node_modules/env-cmd/dist/get-env-vars.js:44:19
    at Generator.throw (<anonymous>)
    at rejected (/Users/soonho/project/gatsby-practice/node_modules/env-cmd/dist/get-env-vars.js:5:65)
    at processTicksAndRejections (internal/process/task_queues.js:89:5)
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! gatsby-starter-hello-world@0.1.0 develop: `env-cmd .env.development gatsby develop`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the gatsby-starter-hello-world@0.1.0 develop script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.

npm ERR! A complete log of this run can be found in:
npm ERR!     /Users/soonho/.npm/_logs/2019-06-19T13_22_21_553Z-debug.log
```

[Using the GraphQL Playground](https://www.gatsbyjs.org/docs/using-graphql-playground/)ë¥¼ ì°¸ê³ í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤. 

ë‹¤ìŒê³¼ ê°™ì´ `-f`ë¥¼ ê°€ìš´ë°ì— ì¶”ê°€í•˜ì—¬ ì €ì¥í•˜ê³  ë‹¤ì‹œ `npm run develop`ë¥¼ ì‹¤í–‰í•œë‹¤.

```json
"develop": "env-cmd -f .env.development gatsby develop"
```

[http://localhost:8000/___graphql](http://localhost:8000/___graphql)ë¡œ ì ‘ì†í•˜ë©´ ì•„ê¹Œì™€ëŠ” ë‹¤ë¥¸ í™”ë©´ì´ ë‚˜ì˜¨ë‹¤. ë°”ë¡œ GraphQL playgroundë‹¤. ì•„ê¹Œì˜ GraphiQLê³¼ ë™ì¼í•˜ê²Œ ì‘ë™í•˜ë©° ê¸°ëŠ¥ì´ ì¢€ ë” ë§ë‹¤.

![image-20190619224217355](README/image-20190619224217355-0951737.png)

íƒ­ ê¸°ëŠ¥ë„ ìˆì–´ì„œ ì—¬ëŸ¬ê°œ ë§Œë“¤ ìˆ˜ ìˆê³  DOCSê¸°ëŠ¥ë„ expandí˜•ì‹ìœ¼ë¡œ ë˜ì–´ìˆì–´ ë” ë³´ê¸° ì‰½ë‹¤.

![image-20190619224322304](README/image-20190619224322304-0951802.png)

ì´ì œ ë³¸ê²©ì ìœ¼ë¡œ í¬ìŠ¤íŠ¸ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ë„£ì–´ë³´ë ¤ í•œë‹¤.
ì´ë¥¼ ìœ„í•´ ë£¨íŠ¸ í´ë”ì— `./src/posts` í´ë”ë¥¼ ìƒì„±í•˜ê³  ì•ˆì— `gatsby.md`ì™€ `react.md`ë¥¼ ë§Œë“ ë‹¤.

```markdown
---
title: "Gatsbyë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•"
date: "2019-04-04"
---

Gatsbyë¥¼ ì´ìš©í•˜ì—¬ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‚¬ì „ì§€ì‹ì´ í•„ìš”í•˜ë‹¤.

## ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ì•Œì•„ì•¼ í•  ê²ƒë“¤

1. Gatsby & Netlify
2. React
3. GraphQL
```

```markdown
---
title: "Reactë¥¼ ì²˜ìŒ ì ‘í–ˆì„ ë•Œ"
date: "2019-04-02"
---

ReactëŠ” ì •ë§ ì¢‹ì€ Frameworkë‹¤!
```

ì´ì œ ì¬ë£ŒëŠ” ì¤€ë¹„ë˜ì—ˆìœ¼ë‹ˆ ë„êµ¬ê°€ í•„ìš”í•˜ë‹¤. ì´ì „ê³¼ ë™ì¼í•˜ê²Œ [í”ŒëŸ¬ê·¸ì¸ ê²€ìƒ‰ í˜ì´ì§€](https://www.gatsbyjs.org/packages/gatsby-source-filesystem/?=source)ì—ì„œ **source**ë¥¼ ê²€ìƒ‰í•œë‹¤. Gatsbyì—ëŠ” sourceë¥¼ ë‹¤ë£¨ëŠ” ë‹¤ì–‘í•œ í”ŒëŸ¬ê·¸ì¸ì´ ì¡´ì¬í•œë‹¤. ê·¸ ì¤‘ ìš°ë¦¬ëŠ” **gatsby-source-filesystem**ì„ ì´ìš©í•˜ë ¤ í•œë‹¤.

![image-20190619230524420](README/image-20190619230524420-0953124.png)

npmì„ í†µí•´ ì„¤ì¹˜í•˜ê³  `gatsby-config.js` íŒŒì¼ì˜ `plugins`ë¶€ë¶„ì— ì¶”ê°€ë¡œ ì˜µì…˜ì„ ë„£ì–´ ì¤€ë‹¤.

```bash
npm install gatsby-source-filesystem
```

```javascript
plugins: [
    `gatsby-plugin-sass`,
    {
      resolve: "gatsby-source-filesystem",
      options: {
        name: "src",
        path: `${__dirname}/src/`,
      },
    },
  ],
```

ì´ë ‡ê²Œ ì˜µì…˜ì„ ì¶”ê°€í•˜ê³  ì„œë²„ë¥¼ ë‹¤ì‹œ ì¬ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ queriesì— ì¶”ê°€ë¡œ fileê³¼ directoryê´€ë ¨ queryê°€ ì¶”ê°€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![image-20190619231751176](README/image-20190619231751176-0953871.png)

ê·¸ëŸ¬ê³ ë‚˜ì„œ playgroundì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ queryë¥¼ ì‘ì„±í•˜ë©´ í”„ë¡œì íŠ¸ ë‚´ì˜ name, extentison, dirì— ê´€í•œ ì •ë³´ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.

```
query{
  allFile{
    edges{
      node{
        name
        extension
        dir
      }
    }
  }
}
```

![image-20190619232059129](README/image-20190619232059129-0954059.png)

ë§¨ ì•„ë˜ë¡œ ë‚´ë ¤ê°€ë©´ ìš°ë¦¬ê°€ ìƒì„±í•œ postë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```
{
  "node": {
    "name": "react",
    "extension": "md",
    "dir": "/Users/soonho/project/gatsby-practice/src/posts"
  }
},
{
  "node": {
    "name": "gatsby",
    "extension": "md",
    "dir": "/Users/soonho/project/gatsby-practice/src/posts"
  }
}
```
ë§ˆí¬ë‹¤ìš´ì„ ë³€í™˜ì‹œì¼œ ì£¼ê¸° ìœ„í•´ì„œ ìƒˆë¡œìš´ í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•œë‹¤. ì—­ì‹œë‚˜ ë§ˆì°¬ê°€ì§€ë¡œ í”ŒëŸ¬ê·¸ì¸ ê²€ìƒ‰ í˜ì´ì§€ì—ì„œ **REMARK**ë¥¼ ê²€ìƒ‰í•˜ì—¬ [gatsby-transformer-remark](https://www.gatsbyjs.org/packages/gatsby-transformer-remark/?=remark)ë¥¼ ì„¤ì¹˜í•œë‹¤.
ì—¬ê¸°ì„œ remarkëŠ” markdowníŒŒì¼ì„ íŒŒì‹±í•´ì£¼ëŠ” javascript libraryë‹¤.

ê·¸ë¦¬ê³  `gatsby-config.js`ì˜ `plugins`ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•œë‹¤.

```javascript
plugins: [
    `gatsby-plugin-sass`,
    {
      resolve: "gatsby-source-filesystem",
      options: {
        name: "src",
        path: `${__dirname}/src/`,
      },
    },
    `gatsby-transformer-remark`,
  ],
```

ë‹¤ì‹œ graphql playgroundì— ì ‘ì†í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë‘ê°œì˜ ìƒˆë¡œìš´ í•­ëª©ì´ ìƒê¸´ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![image-20190625164804981](README/image-20190625164804981-1448885.png)

* `markdownRemark`ëŠ” ê°œë³„ì ì¸ postë¥¼ fetchí•œë‹¤. 
* `allMarkdownRemark`ëŠ” postëª©ë¡ì„ fetchí•œë‹¤.

ìš°ë¦¬ëŠ” `allMarkdownRemark`ë¥¼ í™œìš©í•˜ì—¬ ë¸”ë¡œê·¸ ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“œëŠ” í˜ì´ì§€ë¥¼ ì™„ì„±í•˜ë ¤ í•œë‹¤.

`allMarkdownRemark` > `edges` > `node` > `frontmatter`ë¥¼ íƒ€ê³  ë“¤ì–´ê°€ì„œ ì‚´í´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ `title`ê³¼`date`ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.

![image-20190625171634164](README/image-20190625171634164-1450594.png)

ì´ì œ ì‹¤ì œ graphqlë¡œ ì¡ì•„ì„œ ì–´ë–¤ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ ì˜¬ ìˆ˜ ìˆëŠ”ì§€ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

```javascript

query{
  allMarkdownRemark{
    edges{
      node{
        frontmatter{
          title
          date
        }
      }
    }
  }
}
```

ê²°ê³¼ë¥¼ ë³´ë©´ ì•„ê¹Œ ì‘ì„± í–ˆë˜ postë“¤ì˜ titlê³¼ dateë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```javascript
{
  "data": {
    "allMarkdownRemark": {
      "edges": [
        {
          "node": {
            "frontmatter": {
              "title": "Gatsbyë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•",
              "date": "2019-04-04"
            }
          }
        },
        {
          "node": {
            "frontmatter": {
              "title": "Reactë¥¼ ì²˜ìŒ ì ‘í–ˆì„ ë•Œ",
              "date": "2019-04-02"
            }
          }
        }
      ]
    }
  }
}
```

frontmatterì™¸ì— htmlê³¼ excerptë¥¼ ì¶”ê°€í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.

```javascript
query{
  allMarkdownRemark{
    edges{
      node{
        frontmatter{
          title
          date
        }
        html
        excerpt
      }
    }
  }
}
```

```javascript
"data": {
    "allMarkdownRemark": {
      "edges": [
        {
          "node": {
            "frontmatter": {
              "title": "Gatsbyë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•",
              "date": "2019-04-04"
            },
            "html": "<p>Gatsbyë¥¼ ì´ìš©í•˜ì—¬ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‚¬ì „ì§€ì‹ì´ í•„ìš”í•˜ë‹¤.</p>\n<h2>ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ì•Œì•„ì•¼ í•  ê²ƒë“¤</h2>\n<ol>\n<li>Gatsby &#x26; Netlify</li>\n<li>React</li>\n<li>GraphQL</li>\n</ol>",
            "excerpt": "Gatsbyë¥¼ ì´ìš©í•˜ì—¬ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‚¬ì „ì§€ì‹ì´ í•„ìš”í•˜ë‹¤.ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ì•Œì•„ì•¼ í•  ê²ƒë“¤Gatsby & NetlifyReactGraphQL"
          }
        },
```

ì´ì œ ì´ ê¸€ì˜ ì œëª©ê³¼ ì‹œê°„ì„ ì‹¤ì œ ë¸”ë¡œê·¸ í˜ì´ì§€ì— ë¶ˆëŸ¬ì˜¤ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ `blog.js`ì— ì‘ì„±í•˜ë©´ ëœë‹¤.

```javascript
import React from "react"
import { graphql, useStaticQuery } from "gatsby"

import Layout from "../components/layout"

const BlogPage = () => {
  const data = useStaticQuery(graphql`
    query {
      allMarkdownRemark {
        edges {
          node {
            frontmatter {
              title
              date
            }
          }
        }
      }
    }
  `)

  console.log(data)
```

ë‹¤ìŒê³¼ ê°™ì´ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![image-20190626154756674](README/image-20190626154756674-1531676.png)

ì´ì œ ë¿Œë ¤ì£¼ëŠ” ì¼ë§Œ ë‚¨ì•˜ë‹¤. ê°ê°ì˜ ê¸€ ëª©ë¡ì€ `<ol>`ì„ í†µí•´ ë¿Œë ¤ì§„ë‹¤. ì´ë¥¼ ìœ„í•´ `map`ì„ ì´ìš©í•œë‹¤.

```javascript
import React from "react"
import { graphql, useStaticQuery } from "gatsby"

import Layout from "../components/layout"

const BlogPage = () => {
  const data = useStaticQuery(graphql`
    query {
      allMarkdownRemark {
        edges {
          node {
            frontmatter {
              title
              date
            }
          }
        }
      }
    }
  `)
  return (
    <Layout>
      <h1>Blog</h1>
      <ol>
        {data.allMarkdownRemark.edges.map(edge => {
          return (
            <li>
              <h2>{edge.node.frontmatter.title}</h2>
              <p>{edge.node.frontmatter.date}</p>
            </li>
          )
        })}
      </ol>
    </Layout>
  )
}

export default BlogPage

```

ë¦¬ìŠ¤íŠ¸ì— ëŒ€í•œ ì˜¤ë¥˜ëŠ” ì¼ë‹¨ ë¬´ì‹œí•˜ê³  ë„˜ì–´ê°„ë‹¤.

```bash
Warning: Each child in a list should have a unique "key" prop.
```

---

ì´ì œ ë¸”ë¡œê·¸ postë¥¼ ì„ íƒí•˜ë©´ í˜ì´ì§€ê°€ ë™ì ìœ¼ë¡œ ìë™ ìƒì„±ë˜ê²Œ ë§Œë“¤ì–´ ì£¼ê³  ì‹¶ë‹¤. ë‹¤ì‹œ ë§í•´, ë°ì´í„°ë¥¼ ì •í˜•í™”ëœ ì–‘ì‹ì— ë§ì¶° ìƒì„±í•˜ê²Œ ë§Œë“¤ê³  ì‹¶ë‹¤.

rootí´ë”ì— `gatsby-node.js`ë¥¼  ìƒì„±í•œë‹¤. 

ê·¸ëŸ° ë‹¤ìŒ gatsbyì˜ DOCS í˜ì´ì§€ì—ì„œ API REFERENCEì˜ [Gatsby Node APIs](https://www.gatsbyjs.org/docs/node-apis/) ì—ì„œ í•„ìš”í•œ apië¥¼ ì°¾ì•„ë³¸ë‹¤.![image-20190626172354554](README/image-20190626172354554-1537434.png) 

`onCreateNode` ë¥¼ ì‚¬ìš©í•  ê²ƒì´ë‹¤. ì—¬ê¸°ì„œ nodeëŠ” queryì—ì„œ ë³´ì•˜ë˜ nodeë‹¤. ê° postë¥¼ ëœ»í•œë‹¤ê³  ë³´ë©´ ì‰½ë‹¤.

![image-20190626172615528](README/image-20190626172615528-1537575.png)

![image-20190626172630084](README/image-20190626172630084-1537590.png)

ì•„ê¹Œ ìƒì„±í•œ `gatsby-node.js`ì— ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•œë‹¤. ì¼ë‹¨, `createNode`ëŠ” ì•„ì§ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ë¨¼ì € í™•ì¸ì„ ìœ„í•´ ì½˜ì†”ë¡œ í•œ ë²ˆ ì°ì–´ë³¸ë‹¤. ì´ë¥¼ ìœ„í•´ ì„œë²„ë¥¼ ë‹¤ì‹œ ì‹œì‘í•œë‹¤. 

```javascript
module.exports.onCreateNode = ({ node, actions }) => {
  const { createNodeField } = actions
  console.log(JSON.stringfy(node, undefined, 4))
}
```

![image-20190626174138069](README/image-20190626174138069-1538498.png)

ì—¬ê¸°ì„œ ìš°ë¦¬ëŠ” `internal` > `type` ì— ì§‘ì¤‘í•˜ë©° ë‹¤ì‹œ ë‹¤ìŒê³¼ ê°™ì´ ê³ ì¹œ ì´í›„ ì¶œë ¥í•œë‹¤.

```javascript
module.exports.onCreateNode = ({ node, actions }) => {
  const { createNodeField } = actions
  if (node.internal.type === "MarkdownRemark") {
    console.log(JSON.stringify(node, undefined, 4))
  }
}
```

ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ì˜¨ë‹¤. ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ê²ƒì€ í˜„ì¬ ë‚˜ì™€ìˆëŠ” `fileAbsolutePath`ë¥¼ ë³€ê²½í•  ê²ƒì´ë¼ëŠ” ì ì´ë‹¤.

```javascript
{
    "id": "809ad49b-0045-5668-a92a-556b2295bc3c",
    "children": [],
    "parent": "7b04ea0b-802c-504b-bfa7-fa3593bdf53c",
    "internal": {
        "content": "\nReactëŠ” ì •ë§ ì¢‹ì€ Frameworkë‹¤!",
        "type": "MarkdownRemark",
        "contentDigest": "1bb5ac23b81d05f31949bb2d2594f198",
        "owner": "gatsby-transformer-remark"
    },
    "frontmatter": {
        "title": "Reactë¥¼ ì²˜ìŒ ì ‘í–ˆì„ ë•Œ",
        "date": "2019-04-02"
    },
    "excerpt": "",
    "rawMarkdownBody": "\nReactëŠ” ì •ë§ ì¢‹ì€ Frameworkë‹¤!",
    "fileAbsolutePath":
"/Users/soonho/project/gatsby-practice/src/posts/react.md"
```

ê·¸ë ‡ê²Œ í•˜ê¸° ìœ„í•´ì„œëŠ” nodeì—ì„œ [pathì™€ ê´€ë ¨ëœ ëª¨ë“ˆ](https://nodejs.org/dist/latest-v10.x/docs/api/path.html)ì„ ê°€ì ¸ì™€ ì‚¬ìš©í•œë‹¤. `basename` ì„ ì‚¬ìš©í•œë‹¤.

![image-20190626174635786](README/image-20190626174635786-1538796.png)

ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ê³  í™•ì¸í•˜ë©´ ìš°ë¦¬ê°€ ë§Œë“  í¬ìŠ¤íŠ¸ì˜ í™•ì¥ìë¥¼ ì œì™¸í•œ ì´ë¦„ì´ ì¶œë ¥ëœë‹¤.

```javascript
const path = require("path")

module.exports.onCreateNode = ({ node, actions }) => {
  const { createNodeField } = actions
  if (node.internal.type === "MarkdownRemark") {
    const slug = path.basename(node.fileAbsolutePath, ".md")
    console.log("@@@@@@@@@@@", slug)
  }
}
```

![image-20190626175044490](README/image-20190626175044490-1539044.png)

ì´ì œ ì´ë¦„ì„ ë¶„ë¦¬í•˜ì˜€ê³  ì´ë¥¼ queryì— ë„£ì–´ì¤€ë‹¤. ì´ë¥¼ ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•œë‹¤.

```javascript
const path = require("path")

module.exports.onCreateNode = ({ node, actions }) => {
  const { createNodeField } = actions
  if (node.internal.type === "MarkdownRemark") {
    const slug = path.basename(node.fileAbsolutePath, ".md")
    createNodeField({
      node,
      name: "slug",
      value: slug,
    })
  }
}
```

graphql playgroundë¥¼ ë“¤ì–´ê°€ì„œ í•œ ë²ˆ ê²°ê³¼ë¥¼ ì¶œë ¥í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

```javascript
query{
  allMarkdownRemark{
    edges{
      node{
        frontmatter{
          title
          date
        }
        html
        excerpt
        fields{
          slug
        }
      }
    }
  }
}
```

```javascript
{
  "data": {
    "allMarkdownRemark": {
      "edges": [
        {
          "node": {
            "frontmatter": {
              "title": "Reactë¥¼ ì²˜ìŒ ì ‘í–ˆì„ ë•Œ",
              "date": "2019-04-02"
            },
            "html": "<p>ReactëŠ” ì •ë§ ì¢‹ì€ Frameworkë‹¤!</p>",
            "excerpt": "ReactëŠ” ì •ë§ ì¢‹ì€ Frameworkë‹¤!",
            "fields": {
              "slug": "react"
            }
          }
        },

```

---

ì´ì œ, ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ì˜ í…œí”Œë¦¿ì„ í•œ ë²ˆ ë§Œë“¤ì–´ ë³´ë ¤í•œë‹¤.

ìš°ì„  `src/templates` í´ë”ë¥¼ ë§Œë“¤ê³  `blog.js`ë¥¼ ìƒì„±í•œë‹¤.

```javascript
import React from "react"

import Layout from "../components/layout"

const Blog = () => {
  return <Layout>This is post that i created!</Layout>
}

export default Blog
```

[createPages](https://www.gatsbyjs.org/docs/node-apis/#createPages)ë¼ëŠ” í˜ì´ì§€ë¥¼ ìƒì„±í•˜ëŠ” gasby apiê°€ ìˆë‹¤. ì´ë¥¼ ì´ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” `gastby-node.js` ì— ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ ì¶”ê°€í•œë‹¤.

```javascript
exports.createPages = ({ graphql, actions }) => {
  const { createPage } = actions
  const blogTemplate = path.resolve("./src/templates/blog.js")
}
```

ì´ì œ ìš°ë¦¬ëŠ” í•„ìš”í•œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ìš°ë¦¬ì—ê²Œ í•„ìš”í•œ ì •ë³´ëŠ” `slug` ë¿ì´ê¸° ë•Œë¬¸ì—, queryë¥¼ ì¶”ê°€í•˜ì—¬ ê°€ì ¸ì˜¨ë‹¤. ì´ë•Œ `graphql`ì€ ì•ì—ì„œ ìš°ë¦¬ê°€ ì“°ë˜ `graphql` ëª¨ë“ˆê³¼ ë‹¬ë¦¬ ê·¸ ìì²´ê°€ ë©”ì„œë“œ ì´ê¸° ë•Œë¬¸ì— ë©”ì„œë“œì˜ ë°©ì‹ìœ¼ë¡œ queryë¥¼ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©í•œë‹¤.

```javascript
exports.createPages = ({ graphql, actions }) => {
  const { createPage } = actions
  const blogTemplate = path.resolve("./src/templates/blog.js")
  graphql(`
    query {
      allMarkdownRemark {
        edges {
          node {
            fields {
              slug
            }
          }
        }
      }
    }
  `)
}
```

ì—¬ê¸°ì„œ `graphql`ë©”ì„œë“œëŠ” `return` ê°’ìœ¼ë¡œ `Promise`ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. `async`ì™€ `await`ë¥¼ í†µí•´ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í•´ì¤˜ì•¼í•œë‹¤. createPageë¥¼ í†µí•´ ê°ê° í•„ìš”í•œ ì¸ìë¥¼ ë„˜ê²¨ì¤€ë‹¤.

```javascript
exports.createPages = async ({ graphql, actions }) => {
  const { createPage } = actions
  const blogTemplate = path.resolve("./src/templates/blog.js")
  const res = await graphql(`
    query {
      allMarkdownRemark {
        edges {
          node {
            fields {
              slug
            }
          }
        }
      }
    }
  `)

  res.data.allMarkdownRemark.edges.forEach(edge => {
    createPage({
      component: blogTemplate,
      path: `/blog/${edge.node.fields.slug}`,
      context: {
        slug: edge.node.fields.slug,
      },
    })
  })
}
```

ë‹¤ì‹œ ì„œë²„ë¥¼ ê»ë‹¤ í‚¤ë©´ ìƒì„±ëœ í˜ì´ì§€ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ë°, ì•„ì§ì€ ë§í¬ë¥¼ ì´ì–´ì£¼ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì—, ì§ì ‘ í˜ì´ì§€ë¥¼ ì ‘ê·¼í•´ì•¼í•œë‹¤. slugì— ë”°ë¼ `localhost:8000/blog/react`ì™€ `localhost:8000/blog/gatsby` ì ‘ì†í•´ë³´ë©´ ì˜¬ë°”ë¥´ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![image-20190626213636421](README/image-20190626213636421-1552596.png)

ë§Œì•½ì— ì—†ëŠ” í˜ì´ì§€ì— ì ‘ê·¼í•´ë³´ë©´ ë§Œë“¤ì–´ì§„ ìƒì„±ëœ í˜ì´ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![image-20190626213720635](README/image-20190626213720635-1552640.png)

ì´ì œ ì ‘ê·¼ ë§í¬ë¥¼ ì´ì–´ì¤€ë‹¤. `./src/pages/blog.js` ì—ì„œ `gatsby`ì˜ `Link` ëª¨ë“ˆì„ ê°€ì ¸ì˜¨ë‹¤

```javascript
import React from "react"
import { Link, graphql, useStaticQuery } from "gatsby"

```

ê·¸ë¦¬ê³  í˜ì´ì§€ë¥¼ ì´ì–´ì£¼ê¸° ìœ„í•´ í•„ìš”í•œ ë°ì´í„°ì¸ `slug`ë¥¼ ì¿¼ë¦¬ì— ì¶”ê°€í•œë‹¤.

```javascript
const data = useStaticQuery(graphql`
    query {
      allMarkdownRemark {
        edges {
          node {
            frontmatter {
              title
              date
            }
            fields {
              slug
            }
          }
        }
      }
    }
  `)
```

ê·¸ëŸ° ë‹¤ìŒ `Link`ëª¨ë“ˆì„ ì´ìš©í•˜ì—¬ ë§í¬ë¥¼ ìƒì„±í•œë‹¤. ì•„ê¹Œ ìƒì„±í•œ í˜ì´ì§€ë¥¼ ë§í¬ë¥¼ í´ë¦­í•˜ì—¬ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.

```javascript
 return (
    <Layout>
      <h1>Blog</h1>
      <ol>
        {data.allMarkdownRemark.edges.map(edge => {
          return (
            <li>
              <Link to={`/blog/${edge.node.fields.slug}`}>
                <h2>{edge.node.frontmatter.title}</h2>
                <p>{edge.node.frontmatter.date}</p>
              </Link>
            </li>
          )
        })}
      </ol>
    </Layout>
  )
```

---

ì´ì œ í˜ì´ì§€ë¥¼ í´ë¦­í•˜ë©´ ê°ê°ì— ë§ëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê²Œë” ë§Œë“œë ¤ê³  í•œë‹¤. 

ë‹¤ì‹œ playgroundë¡œ ê°€ì„œ ìš°ë¦¬ê°€ í•„ìš”í•œ ë°ì´í„°ë¥¼ í•œ ë²ˆ í™•ì¸í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤. `slug`ì—  `eq`ë¥¼ ì§€ì •í•˜ì—¬ ê°€ì ¸ì˜¤ë ¤ê³  í•œë‹¤. (ì¡°ê±´ë¶€ íƒìƒ‰ì²˜ëŸ¼)

![image-20190626215510552](README/image-20190626215510552-1553710.png)

ìš°ë¦¬ê°€ ì•ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ë‹¤ìŒê³¼ ê°™ì´ ê°€ì ¸ì™”ì—ˆë‹¤.

```javascript
query{
  markdownRemark{
    frontmatter{
      title
    }
  }
}
```

ì—¬ê¸°ì— ì¡°ê±´ì„ ì£¼ê¸° ìœ„í•´ graphqlì—ì„œëŠ” ì¸ìë¥¼ ë„£ì–´ ì¡°ê±´ì„ ê¸°ì¤€ìœ¼ë¡œ íƒìƒ‰í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤.

`markdownRemark`ì— ì¸ìë¥¼ ë„£ì–´ ì¡°ê±´ì— ë§ëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

```javascript
query{
  markdownRemark (
    fields:{
      slug:{
        eq: "react"
      }
    }
  ){
    frontmatter{
      title
    }
  }
}
```

```javascript
{
  "data": {
    "markdownRemark": {
      "frontmatter": {
        "title": "Reactë¥¼ ì²˜ìŒ ì ‘í–ˆì„ ë•Œ"
      }
    }
  }
}
```

í•˜ì§€ë§Œ ì´ê±¸ ì‹¤ì œë¡œ ì“°ê¸°ìœ„í•´ì„œëŠ” **query variables** ë¥¼ ì´ìš©í•˜ì—¬ ë™ì ìœ¼ë¡œ ê°’ì„ ì¤„ ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ì•¼ í•œë‹¤. í™”ë©´ ì•„ë˜ì˜ QUERY VARIABLESë¥¼ í´ë¦­í•˜ë©´ ì½˜ì†”ì°½ í•˜ë‚˜ê°€ ë‚˜ì˜¤ëŠ”ë° ì—¬ê¸°ì— ê°’ì„ ë„£ì–´ ì£¼ê³  query ìì²´ì— ì¸ìë¥¼ ë°›ì„ ìˆ˜ ìˆê²Œ ë°”ê¿”ì¤€ë‹¤. ì•„ê¹Œì™€ ê°™ì´ reactì— ëŒ€í•œ ê²°ê³¼ê°€ ì¶œë ¥ëœë‹¤. ë§Œì•½ ì—¬ê¸°ì„œ `"slug":"react"`ë¥¼ `"gatsby"`ë¡œ ë³€ê²½í•˜ë©´ ì´ì— ë§ëŠ” ê²°ê³¼ê°€ ì¶œë ¥ëœë‹¤.

```javascript
query(
  $slug: String!
){
  markdownRemark (
    fields:{
      slug:{
        eq: $slug
      }
    }
  ){
    frontmatter{
      title
    }
  }
}
```

```javascript
{
  "slug" : "react"
}
```

![image-20190626220837212](README/image-20190626220837212-1554517.png)

ì´ì œ ì´ queryë¥¼ ì§ì ‘ ì‚¬ìš©í•´ë³´ì. ì—¬ê¸°ì„œ ì•ì—ì„œì™€ ê°™ì´ `useStaticQuery`ë¥¼ ì´ìš©í•œ ë°©ë²•ìœ¼ë¡œëŠ” ì¿¼ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ë‹¤. ë™ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ í• ë‹¹í•  ê²½ìš°, ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•´ì•¼ í•œë‹¤. queryë¥¼ exportí•˜ê³ , ì´ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

```javascript
import React from "react"
import { graphql } from "gatsby"

import Layout from "../components/layout"

export const query = graphql`
  query($slug: String!) {
    markdownRemark(fields: { slug: { eq: $slug } }) {
      frontmatter {
        title
        date
      }
      html
    }
  }
`

const Blog = props => {
  return (
    <Layout>
      <h1>{props.data.markdownRemark.frontmatter.title}</h1>
      <p>{props.data.markdownRemark.frontmatter.date}</p>
    </Layout>
  )
}

export default Blog

```

ì´ì œ ì—¬ê¸°ì— ë‚´ìš©ì— í•´ë‹¹í•˜ëŠ” ë¶€ë¶„ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë°, ì´ë•ŒëŠ” reactì˜ `dangerouslySetInnerHTML`ë¥¼ ì´ìš©í•œë‹¤.

![image-20190626222717950](README/image-20190626222717950-1555638.png)

```javascript
const Blog = props => {
  return (
    <Layout>
      <h1>{props.data.markdownRemark.frontmatter.title}</h1>
      <p>{props.data.markdownRemark.frontmatter.date}</p>
      <div
        dangerouslySetInnerHTML={{ __html: props.data.markdownRemark.html }}
      ></div>
    </Layout>
  )
}
```

ì˜¬ë°”ë¥´ê²Œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ë¿Œë ¤ì£¼ê³  ìˆë‹¤.

![image-20190626222818800](README/image-20190626222818800-1555698.png)

---

## Postì— ì´ë¯¸ì§€ ë”í•˜ê¸°

3ê°€ì§€ í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•˜ì—¬ ì‰½ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

ì•„ë¬´ ì´ë¯¸ì§€ë‚˜ `src/posts`ì— ë„£ëŠ”ë‹¤. ê·¸ë¦¬ê³  `gatsby.md`ì— ë‹¤ìŒê³¼ ê°™ì´ Markdownì— ë§ëŠ” ì´ë¯¸ì§€ ê²½ë¡œë¥¼ ì„¤ì •í•˜ì—¬ í•˜ë‚˜ ë§Œë“ ë‹¤.

```markdown
![Gatsby](./gatsby-image.jpg)
```

ì´ì œ ë‹¤ì‹œ ì„œë²„ë¥¼ ë„ê³  í”ŒëŸ¬ê·¸ì¸ë“¤ì„ ì„¤ì¹˜í•œë‹¤

```bash
npm install gatsby-plugin-sharp gatsby-remark-images gatsby-remark-relative-images
```

ê·¸ë¦¬ê³  `gastby-config.js`ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•œë‹¤.

```javascript
module.exports = {
  siteMetadata: {
    title: "JSnow's dev blog",
    author: "Snow Jang",
  },
  // in gatsby-config.js
  plugins: [
    "gatsby-plugin-sass",
    {
      resolve: "gatsby-source-filesystem",
      options: {
        name: "src",
        path: `${__dirname}/src/`,
      },
    },
    "gatsby-plugin-sharp",
    {
      resolve: "gatsby-transformer-remark",
      options: {
        plugins: [
          "gastby-remark-relative-images",
          {
            resolve: "gastby-remark-images",
            opsions: {
              maxWidth: 750,
              linkImagesToOriginal: false,
            },
          },
        ],
      },
    },
  ],
}
```

ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ ì´ë¯¸ì§€ê°€ ì˜ ë“¤ì–´ê°€ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![image-20190627190255362](README/image-20190627190255362-1629775.png)

í•„ìš”í•˜ë‹¤ë©´, `src/posts/gatsby`ë¥¼ ìƒì„±í•˜ì—¬ `gatsby.md`ì™€ `gatsby-image.jpg` ë¥¼ ì˜®ê²¨ì„œ ì´ë¯¸ì§€ì™€  ë§ˆí¬ë‹¤ìš´ë¬¸ì„œë¥¼ í•¨ê»˜ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.

ì¶”ê°€ë¡œ `footer`ê°€ ë„ˆë¬´ ë¶™ì–´ ìˆê³  ìŠ¤íƒ€ì¼ì´ ì—†ì–´ ë§ˆì¹˜ ê¸€ì˜ ì—°ì¥ì„ ìœ¼ë¡œ ë³´ì¸ë‹¤. ì´ë¥¼ ìœ„í•´, `footer`ì— ìŠ¤íƒ€ì¼ì„ ì¶”ê°€í•œë‹¤. `footer.module.scss` ë¥¼ ë§Œë“¤ê³  ë‹¤ìŒê³¼ ê°™ì€ ìŠ¤íƒ€ì¼ì„ ì¶”ê°€í•œë‹¤.

```css
.footer {
  margin-top: 3rem;
}
```

`footer` ì— ì´ë¥¼ ì´ì–´ì¤€ë‹¤.

```javascript
import footerStyles from "./footer.module.scss"
...
  return (
    <footer className={footerStyles.footer}>
      <p>Created by {data.site.siteMetadata.author}, Â© 2019</p>
    </footer>
  )
```

ê·¸ë¦¬ê³  ë¸”ë¡œê·¸ ê¸€ ëª©ë¡ì„ ì¢€ ë” ê¾¸ë©°ë³´ì

`src/pages`ì— `blog.module.scss`ë¥¼ ìƒì„±í•œë‹¤.

```css
.posts {
  list-style-type: none;
  margin: 0;
}
```

```javascript
import blogStyles from "./blog.module.scss"
...
 return (
    <Layout>
      <h1>Blog</h1>
      <ol className={blogStyles.posts}>
```

ì´ì œ `<li>`ì™€ `<h2>`, `<p>`ì— ìŠ¤íƒ€ì¼ì„ ì£¼ë ¤ í•˜ëŠ”ë°, ì´ë ‡ê²Œ í•˜ë‚˜í•˜ë‚˜ ì ìš©í•˜ëŠ” ë°©ì‹ì€ ë²ˆê±°ë¡­ë‹¤.

í•œêº¼ë²ˆì— ì ìš©í•˜ê³  ì‹¶ë‹¤. ë¨¼ì € `<li>`ì— ìš°ë¦¬ê°€ í–ˆë˜ ë°©ì‹ëŒ€ë¡œ ìŠ¤íƒ€ì¼ì„ ì ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

```css
.post {
  margin: 1rem 0;
}
```

```javascript
return (
  <li className={blogStyles.post}>
    <Link to={`/blog/${edge.node.fields.slug}`}>
      <h2>{edge.node.frontmatter.title}</h2>
      <p>{edge.node.frontmatter.date}</p>
    </Link>
  </li>
)
```

scssë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.

```scss
.post {
  margin: 1rem 0;
  a {
    background: #f4f4f4;
    color: #000;
    display: block;
    padding: 1rem;
    text-decoration: none;
  }
  a:hover {
    background: #e4e4e4;
  }
  h2 {
    margin-bottom: 0;
  }
  p {
    color: #777777;
    font-size: 0.8rem;
    font-style: italic;
  }
}
```
---

## ë‚ ì§œ í¬ë§· ë³€í™˜

ë‚ ì§œ í¬ë§· ë³€í™˜ì€ ì–´ë µì§€ ì•Šë‹¤. `src/pages/blog.js`ì—ì„œ ì•ì„œ ì‚¬ìš©í–ˆë˜ ì¿¼ë¦¬ë¥¼ ì¡°ê¸ˆ ìˆ˜ì •í•˜ë©´ ëœë‹¤.

ìš°ì„  playgroundì—ì„œ í™•ì¸í•˜ì ì›ë˜ì˜ ì¿¼ë¦¬ëŒ€ë¡œ íƒ€ê³ ê°€ë‹¤ ë³´ë©´ `date`ë¥¼ ë§Œë‚˜ëŠ”ë° ì´ `date` ì•ˆì—ëŠ” `formatString` ì´ë¼ëŠ” ë§¤ê°œë³€ìˆ˜ì— ê°’ì„ í• ë‹¹í•˜ì—¬ ë‚ ì§œ í˜•ì‹ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

![image-20190627194719743](README/image-20190627194719743-1632439.png)

ë‹¤ì–‘í•œ ë‚ ì§œ í˜•ì‹ì´ ìˆëŠ”ë° [momentjs](https://momentjs.com/)ë¥¼ ì°¸ê³ í•˜ì—¬ ì›í•˜ëŠ” ë‚ ì§œ í˜•ì‹ì„ ì„ íƒí•˜ë©´ ëœë‹¤.

```javascript
query {
      allMarkdownRemark {
        edges {
          node {
            frontmatter {
              title
              date(formatString: "MMMM Do, YYYY")
            }
            fields {
              slug
            }
          }
        }
      }
    }
```

ì¶”ê°€ë¡œ sortê¸°ëŠ¥ë„ ì¶”ê°€ ê°€ëŠ¥í•˜ë‹¤. ê¸€ì˜ ê²½ìš° ìµœì‹  ê¸€ì´ ë§¨ ìœ„ë¡œ ìˆê¸° ë•Œë¬¸ì— ê·¸ì— ë§ê²Œ ë³€ê²½í•´ì•¼í•œë‹¤.

![image-20190627194848563](README/image-20190627194848563-1632528.png)

`frontmatter`ë‚´ë¶€ì— ìˆëŠ” `date`ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ê¸° ë•Œë¬¸ì— ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ì—¬ ì´ìš©í•œë‹¤.

```javascript
query {
      allMarkdownRemark (
        sort:{
          fields: frontmatter___date
          order:DESC
        }
      ){
        edges {
          node {
            frontmatter {
              title
              date(formatString: "MMMM Do, YYYY")
            }
            fields {
              slug
            }
          }
        }
      }
    }
```

---

## 404 Pageì™€ React Helmet

`src/pages`ì— `404.js`ë¥¼ ìƒì„±í•œë‹¤.

```javascript
import React from "react"
import { Link } from "gatsby"

import Layout from "../components/layout"

const NotFound = () => {
  return (
    <Layout>
      <h1>Page not found</h1>
      <p>
        <Link to="/">Head home</Link>
      </p>
    </Layout>
  )
}

export default NotFound
```

ì„œë²„ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ê³  ì•„ë¬´ í‹€ë¦° ì£¼ì†Œë¥¼ ì…ë ¥í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ì˜¤ëŠ”ë°, ì´ í˜ì´ì§€ëŠ” ì‹¤ì œ í”„ë¡œë•íŠ¸ í˜ì´ì§€ì—ì„œëŠ” ë³´ì´ì§€ ì•ŠëŠ”ë‹¤. ì§ì ‘ ë§Œë“  404 pageëŠ” `Preview custom 404 page`ë¥¼ í´ë¦­í•˜ì—¬ í™•ì¸ê°€ëŠ¥í•˜ë‹¤. 

![image-20190627200708684](README/image-20190627200708684-1633628.png)

ì´ì œ [React Helmet](https://github.com/nfl/react-helmet)ì„ ì‚¬ìš©í•´ë³´ë ¤ í•œë‹¤. ì´ì™€ ê°™ì´ [gatsby-plugin-react-helmet](https://www.gatsbyjs.org/packages/gatsby-plugin-react-helmet/)ì„ ì´ìš©í•˜ë©´ ì‰½ê²Œ ì“¸ ìˆ˜ ìˆë‹¤.

```bash
npm install gatsby-plugin-react-helmet react-helmet
```

`gatsby-config.js` ë„ ìˆ˜ì •í•œë‹¤.

```javascript
// in gatsby-config.js
  plugins: [
    "gatsby-plugin-react-helmet",
```

ëª¨ë“  íŒŒì¼ì— headë¥¼ ë§Œë“¤ì–´ ì¤„ ìˆ˜ë„ ìˆì§€ë§Œ ê·¸ê²ƒë³´ë‹¤ëŠ” í˜ì´ì§€ë§ˆë‹¤ ë™ì ìœ¼ë¡œ í• ë‹¹í•˜ëŠ” ê²ƒì´ ë” ì¢‹ë‹¤. ë”°ë¼ì„œ `src/components`ì— `head.js`ë¥¼ ìƒì„±í•œë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ê°„ë‹¨í•˜ê²Œ ì‘ì„±í•˜ì˜€ë‹¤.

```javascript
import React from "react"
import { Helmet } from "react-helmet"

const Head = () => {
  return <Helmet title="This is a test" />
}
export default Head
```

í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ `src/pages/index.js`ë¥¼ ìˆ˜ì •í•œë‹¤. 

```javascript
import React from "react"

import Layout from "../components/layout"
import Head from "../components/head"

const IndexPage = () => {
  return (
    <div>
      <Layout>
        <Head />
        <h1>Hello.</h1>
        <h2>I'm JSnow! Front-end developer, I'm learning React!</h2>
      </Layout>
    </div>
  )
}

export default IndexPage
```

ì˜¬ë°”ë¥´ê²Œ This is a testë¥¼ ì¶œë ¥í•˜ê³  ìˆë‹¤. ì—¬ê¸°ì„œ faviconì„ ë°”ê¿”ì£¼ê³  ì‹¶ë‹¤ë©´, ë£¨íŠ¸ í´ë”ì˜ `static/favicon.ico`ë¥¼ ìˆ˜ì •í•˜ë©´ ëœë‹¤.

![image-20190627202114904](README/image-20190627202114904-1634475.png)

---

## 

## Gatsbyë¡œ ë§Œë“  í˜ì´ì§€ ë°°í¬í•˜ê¸°

`.env.development`ëŠ” í‚¤ê°’ê°™ì€ ë‹¤ì–‘í•œ ë°ì´í„°ë¥¼ ë‹´ê³  ìˆë‹¤. ì—¬ê¸°ì„œëŠ” CONTENTFULì´ë€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ í‚¤ê°’ì„ ê°€ì§€ê³  ìˆì§€ë§Œ ì‹¤ì œ ì—°ìŠµì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ì•Šì•˜ë‹¤.

![image-20190628110743433](README/image-20190628110743433-1687663.png)

ì´ `.env.development`ì˜ ì´ë¦„ì„ `.env`ë¡œ ë°”ê¾¼ë‹¤. ê·¸ë¦¬ê³  `package.js` ì—ì„œ `scripts`ë¶€ë¶„ë„ ìˆ˜ì •í•œë‹¤.

```javascript
"scripts": {
    "build": "gatsby build",
    "develop": "env-cmd -f .env gatsby develop",
    "format": "prettier --write src/**/*.{js,jsx}",
```

ê·¸ë¦¬ê³  í•„ìš”í•œ git repositoryë¥¼ ë§Œë“¤ì–´ì£¼ê³  ëª¨ë“  íŒŒì¼ì„ ì—…ë¡œë“œ í•œë‹¤.

![image-20190628111202362](README/image-20190628111202362-1687922.png)

ë°°í¬ë¥¼ ìœ„í•´ì„œëŠ” [Netlify](https://www.netlify.com/)ë¥¼ ì´ìš©í•œë‹¤. ì™„ì „ ë¬´ë£Œë‹¤.

![image-20190628111311320](README/image-20190628111311320-1687991.png)

`New site from git`ì„ ëˆ„ë¥¸ë‹¤.

![image-20190628111401751](README/image-20190628111401751-1688042.png)

ì›í•˜ëŠ” git providerë¥¼ ì„ íƒí•œë‹¤.

![image-20190628111519952](README/image-20190628111519952-1688120.png)

ëª¨ë“  ë ˆí¬ë¥¼ ê°€ì ¸ì˜¬ì§€ ë”± í•˜ë‚˜ì˜ ë ˆí¬ë¥¼ ê°€ì ¸ì˜¬ì§€ ì •í•  ìˆ˜ ìˆë‹¤. ì•„ê¹Œ ë§Œë“¤ì—ˆë˜ ë ˆí¬ë¥¼ ê°€ì ¸ì™€ ë°°í¬í•  ì˜ˆì •ì´ê¸° ë•Œë¬¸ì— Only select repositoriesì—ì„œ í•„ìš”í•œ ë ˆí¬ë¥¼ ì„ íƒí•œë‹¤.

![image-20190628111650753](README/image-20190628111650753-1688211.png)

ê·¸ë¦¬ê³  Install í•˜ë©´ ëœë‹¤.

![image-20190628111712014](README/image-20190628111712014-1688232.png)

ì„ íƒí•œ ë ˆí¬ë¥¼ ë‹¤ì‹œ í´ë¦­í•˜ë©´ ì„¸íŒ…í˜ì´ì§€ë¡œ ë„˜ì–´ê°„ë‹¤.

![image-20190628111801905](README/image-20190628111801905-1688282.png)

ê·¸ëŸ°ë‹¤ìŒ ì›í•˜ëŠ” ë¸Œëœì¹˜ë¥¼ ì„ íƒí•˜ì—¬ ë°°í¬í•  ìˆ˜ ìˆë‹¤. í•„ìš”í•˜ë©´ masterë§ê³  ë‹¤ë¥¸ ë¸Œëœì¹˜ë¥¼ ë‘ì–´ ê·¸ ë¸Œëœì¹˜ë¥¼ ë°°í¬í•´ë„ ëœë‹¤. ë‹¤ë¥¸ ì•„ë˜ì˜ Basic build settingsëŠ” êµ³ì´ ê±´ë“œë¦´ í•„ìš”ê°€ ì—†ë‹¤.

![image-20190628111847335](README/image-20190628111847335.png)

ì•„ë˜ì— ë³´ë©´ Show advanced ë²„íŠ¼ì´ ìˆëŠ”ë° ëˆŒëŸ¬ì„œ ì•„ë˜ì™€ ê°™ì´ Advanced build settingsë¥¼ í•  ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì„œ New variableì„ ëˆ„ë¥´ë©´ ì•„ë˜ì™€ ê°™ì´ Key valueë¥¼ ì…ë ¥í•  ìˆ˜ ìˆëŠ” ì¹¸ì´ ë‚˜ì˜¤ëŠ”ë° ì•„ê¹Œ .envíŒŒì¼ê³¼ ë™ì¼í•˜ê²Œ ì—­í• í•œë‹¤. ë§Œì•½ í•„ìš”í•œ access keyê°€ ìˆë‹¤ë©´ ì´ë¥¼ í™œìš©í•˜ì—¬ ê°’ì„ ë„˜ê²¨ì¤„ ìˆ˜ ìˆë‹¤.

![image-20190628112044094](README/image-20190628112044094-1688444.png)

ì´ì œ ë””í”Œë¡œì´ì¤‘ì¸ í™”ë©´ì´ ë‚˜ì˜¤ëŠ”ë° ì‹œê°„ì´ ì¡°ê¸ˆ ê±¸ë¦°ë‹¤.

![image-20190628112323201](README/image-20190628112323201-1688603.png)

ë””í”Œë¡œì´ê°€ ì™„ë£Œë˜ë©´ í˜ì´ì§€ ì£¼ì†Œê°€ ë‚˜ì˜¤ëŠ”ë° ëˆŒëŸ¬ì„œ ì ‘ì†í•˜ë©´ ë¸”ë¡œê·¸ê°€ ë””í”Œë¡œì´ ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![image-20190628112419100](README/image-20190628112419100-1688659.png)

ë§Œì•½ ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ê³  ë°ì´í„°ë¥¼ ì‚¬ì´íŠ¸ì— ë°˜ì˜í•˜ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ Deploysíƒ­ì— ê°€ì„œ Trigger deployë¥¼ ëˆŒëŸ¬  Clear cache and deploy siteë¥¼ ëˆŒëŸ¬ ë””í”Œë¡œì´ í•  ìˆ˜ ìˆë‹¤.

![image-20190628112712261](README/image-20190628112712261-1688832.png)

ì´ë³´ë‹¤ëŠ” ìš°ë¦¬ê°€ ì˜ ì“°ëŠ” ë¡œì»¬ì—ì„œëŠ” gitì— ìˆ˜ì •ì‚¬í•­ì„ ë‹¤ì‹œ push í•˜ë©´ ìë™ìœ¼ë¡œ ë‹¤ì‹œ Publish ëœë‹¤.